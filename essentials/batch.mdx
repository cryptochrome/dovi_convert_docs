---
title: "Batch Processing"
description: "Scan and convert entire directories of files"
icon: "files"
---

The `-batch` command processes multiple files at once. It scans a directory (or the current directory by default), identifies all Profile 7 files, and converts them in sequence. You can target specific directories and control recursion depth.

## How batch processing works

When you run `-batch`:

1. **Scans** the directory recursively for MKV files
2. **Analyzes** each file to identify Profile 7 content and FEL status
3. **Displays** a summary showing what will be converted
4. **Asks** for confirmation before proceeding
5. **Converts** eligible files one by one

<Callout icon="circle-info" color="#8caaee" iconType="solid">
Non-Profile 7 files are skipped automatically. You don't need to filter your directory first.
</Callout>

## Basic usage

Process all Profile 7 files in the current directory:

```bash
dovi_convert -batch
```

### Target specific directories

Point `-batch` at any directory instead of navigating there first:

```bash
dovi_convert -batch /path/to/movies
```

You can specify multiple directories in a single command:

```bash
dovi_convert -batch /movies /tv /documentaries
```

### Recursive scanning

By default, `-batch` only looks at the top level of each directory. Use `-r` to scan subdirectories:

```bash
dovi_convert -batch -r 2    # Scan 2 levels deep
dovi_convert -batch -r       # Default: 5 levels deep
```

Combine with directory targeting:

```bash
dovi_convert -batch /movies -r 3
```

### Custom output directory

Use `-o` to place converted files in a separate directory instead of alongside the originals:

```bash
dovi_convert -batch /movies/action -o /output
```

The output mirrors the source structure, preserving the basename of the source directory. This follows the same convention as Unix tools like `cp` and `rsync`.

| Source | Output |
|--------|--------|
| `/movies/action/Die.Hard.mkv` | `/output/action/Die.Hard.mkv` |
| `/movies/action/1980s/Predator.mkv` | `/output/action/1980s/Predator.mkv` |

The output directory is created automatically if it does not exist. Subdirectories are also created as needed.

Your original files are renamed to `.bak.dovi_convert` and stay in the source location - they are not moved or deleted.

## Safety behavior

Batch processing follows the same safety rules as single-file conversion:

| File type | Default behavior |
|-----------|------------------|
| **MEL** | Converted automatically |
| **Simple FEL** | Pauses for confirmation |
| **Complex FEL** | Skipped entirely |

### Handling Simple FEL files

By default, batch processing stops when it encounters Simple FEL files and asks if you want to include them:

```
Found 3 Simple FEL files. Include them in this batch? [y/N]
```

If you say no, the batch continues with only MEL files.

## Automation options

### Auto-confirm (`-y`)

Skip the initial confirmation prompt:

```bash
dovi_convert -batch -y
```

<Callout icon="circle-info" color="#8caaee" iconType="solid">
The `-y` flag skips the "Start batch?" prompt but still pauses on Simple FEL files. This prevents accidental processing of files you might want to verify first.
</Callout>

### Include Simple FEL (`-include-simple`)

Treat Simple FEL files the same as MEL - process them without pausing:

```bash
dovi_convert -batch -y -include-simple
```

This combination gives you fully automated processing:
- `-y` skips the start confirmation
- `-include-simple` skips the Simple FEL confirmation

### Force Complex FEL (`-force`)

Include Complex FEL files in the batch:

```bash
dovi_convert -batch -force
```

<Callout icon="circle-exclamation" color="#ef9f76" iconType="solid">
Forcing conversion on Complex FEL files produces incorrect results. Use this only if you understand and accept that some files will have incorrect tone mapping.
</Callout>

### Permanent deletion (`-delete`)

Remove original files immediately after each successful conversion, skipping the backup step entirely:

```bash
dovi_convert -batch -delete
```

<Callout icon="triangle-exclamation" color="#e78284" iconType="solid">
This is irreversible. Your original Profile 7 files are gone permanently. Only use this if storage space is a concern and you're confident in the conversion results.
</Callout>

<Callout icon="lightbulb" color="#a6d189" iconType="solid">
If storage is a concern but you want a safety net, run the batch without `-delete`, verify your results, then use `-cleanup` to remove backups selectively.
</Callout>

## Batch summary

After scanning, dovi_convert shows a summary:

```
=== Batch Summary ===
Profile 7 MEL:        12 files
Profile 7 Simple FEL:  3 files
Profile 7 Complex FEL: 1 file (will be skipped)
Other/Ignored:        45 files

Total to convert: 15 files (423 GB)
Proceed? [y/N]
```

This gives you a chance to review before any changes are made.

## Cleaning up backups

After batch processing, you will have `.bak.dovi_convert` backup files. These are the backups of your original files. If you don't want to keep them, you can remove them using the `-cleanup` command.

<Callout icon="triangle-exclamation" color="#e78284" iconType="solid">
This is irreversible. Your original Profile 7 files are gone permanently. Only use this if storage space is a concern and you're confident in the conversion results.
</Callout>

### Basic cleanup

Remove backup files in the current directory:

```bash
dovi_convert -cleanup
```

### Recursive cleanup

Remove backups from subdirectories:

```bash
dovi_convert -cleanup -r
```

### Auto-confirm cleanup

Skip the confirmation prompt:

```bash
dovi_convert -cleanup -y
```

<Callout icon="circle-info" color="#8caaee" iconType="solid">
The cleanup command has a safety check: it only deletes backups where the corresponding converted file exists. If you deleted the converted file (maybe it was corrupted), the backup is kept as orphan protection.
</Callout>

## Improving performance on slow storage

If your source files are on a mechanical hard drive or network storage, batch processing can be slow. This happens because the disk has to read source files and write temporary files at the same time.

Use the `-temp` flag to write temporary files to a separate, faster drive:

```bash
dovi_convert -batch -temp /mnt/ssd/temp
```

<Callout icon="lightbulb" color="#a6d189" iconType="solid">
Use an SSD or NVMe drive as your temp directory for best results.
</Callout>

## Next steps

<CardGroup cols={2}>
  <Card title="File Scanning" icon="scanner-image" href="/essentials/scanning">
    Learn more about analyzing files before conversion
  </Card>
  <Card title="Backup & Restore" icon="floppy-disk" href="/essentials/backup-restore">
    Archive original layers for future restoration
  </Card>
</CardGroup>